<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="Archival Guide With Backblaze B2">
<title>Rclone Cloud Archival Pro Tips</title>

<link rel='canonical' href='http://localhost:1313/post/video/2020/rclone-b2-pro-tips/'>

<link rel="stylesheet" href="/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css"><meta property='og:title' content="Rclone Cloud Archival Pro Tips">
<meta property='og:description' content="Archival Guide With Backblaze B2">
<meta property='og:url' content='http://localhost:1313/post/video/2020/rclone-b2-pro-tips/'>
<meta property='og:site_name' content='Krishna Bhamidipati'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='cloud' /><meta property='article:published_time' content='2020-03-18T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2020-03-18T00:00:00&#43;00:00'/>
<meta name="twitter:title" content="Rclone Cloud Archival Pro Tips">
<meta name="twitter:description" content="Archival Guide With Backblaze B2">
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu13739649187745961479.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">👀</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Krishna Bhamidipati</a></h1>
            <h2 class="site-description">Keep Asking How</h2>
        </div>
    </header><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/page/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/gear/' >
                
                
                
                    <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-device-laptop"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19l18 0" /><path d="M5 6m0 1a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v8a1 1 0 0 1 -1 1h-12a1 1 0 0 1 -1 -1z" /></svg>
                
                <span>Gear</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/about/' >
                
                
                
                    <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-lego"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9.5 11l.01 0" /><path d="M14.5 11l.01 0" /><path d="M9.5 15a3.5 3.5 0 0 0 5 0" /><path d="M7 5h1v-2h8v2h1a3 3 0 0 1 3 3v9a3 3 0 0 1 -3 3v1h-10v-1a3 3 0 0 1 -3 -3v-9a3 3 0 0 1 3 -3" /></svg>
                
                <span>About</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>Dark Mode</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#recap">Recap</a></li>
    <li><a href="#to-keep-in-mind">To Keep in Mind</a>
      <ul>
        <li><a href="#remote-to-remote-is-possible">Remote to Remote is Possible</a></li>
        <li><a href="#list-folders-syntax-lsd">List Folders Syntax: <code>lsd</code></a></li>
        <li><a href="#consider-copy-instead-of-sync">Consider <code>copy</code> instead of <code>sync</code></a></li>
        <li><a href="#expect-errors-and-verify">Expect Errors and Verify</a></li>
        <li><a href="#beware-quota-restrictions">Beware Quota Restrictions</a></li>
        <li><a href="#double-check-the-source-supports-and-has-checksums">Double Check the Source Supports (and has) Checksums</a></li>
        <li><a href="#rclone-browser-is-great-but-deprecated-for-local---remote">Rclone Browser is Great (but Deprecated) for Local &lt;-&gt; Remote</a></li>
        <li><a href="#-reliability-by--chunk-size-using--ram">⬆︎ Reliability by ⬆︎ Chunk Size (using ⬆︎ RAM)</a></li>
        <li><a href="#measure-twice-cut-once-dryrun">Measure Twice, Cut Once: <code>dryrun</code></a></li>
      </ul>
    </li>
    <li><a href="#the-sync-command">The <code>sync</code> command</a>
      <ul>
        <li><a href="#explanation-of-flags">Explanation of Flags</a></li>
        <li><a href="#phased-approach-with---max-size">Phased Approach with <code>--max-size</code></a></li>
      </ul>
    </li>
    <li><a href="#the-check-command">The <code>check</code> command</a>
      <ul>
        <li><a href="#use-error-output-to-create-diff-file">Use error output to create diff file</a></li>
      </ul>
    </li>
    <li><a href="#the-cleanup-command">The <code>cleanup</code> command</a></li>
    <li><a href="#appendix">Appendix</a>
      <ul>
        <li><a href="#performance-logs">Performance Logs</a></li>
        <li><a href="#upload-cutoffs-of-5g">Upload cutoffs of &ldquo;5G&rdquo;</a></li>
        <li><a href="#500-internal-server-error">500 Internal Server Error</a></li>
      </ul>
    </li>
    <li><a href="#references">References</a></li>
  </ul>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/video/" >
                Video
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/post/video/2020/rclone-b2-pro-tips/">Rclone Cloud Archival Pro Tips</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            Archival Guide With Backblaze B2
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Mar 18, 2020</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    7 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="recap">Recap
</h2><p>The <a class="link" href="/post/video/2020/missing-checksums-with-synology-b2-cloud-sync/" >previous post</a> detailed how <a class="link" href="https://rclone.org"  target="_blank" rel="noopener"
    >Rclone</a> can reliably upload large files with their checksums to Backblaze unlike other programs. This post will outline the workflow and some gotchas to keep in mind when doing massive data loads over the internet.</p>
<p>With trial and error, I was able to archive 8 TB of footage from my Synology NAS to Backblaze B2 in about a month.</p>
<h2 id="to-keep-in-mind">To Keep in Mind
</h2><p>First, the overall workflow.</p>
<h3 id="remote-to-remote-is-possible">Remote to Remote is Possible
</h3><p>Keep in mind Rsync supports copying between two remotes directly. The computer running Rclone will stream data in RAM as it shuttles data between the two.</p>
<p>In fact that&rsquo;s what I mainly did: transferred assets from a personal B2 bucket to the organization&rsquo;s new B2 bucket. Pretty neat!</p>
<h3 id="list-folders-syntax-lsd">List Folders Syntax: <code>lsd</code>
</h3><p>After setting up your remote with <code>rclone config</code>, use the list directory command <code>lsd</code> to double check your source/target folders.</p>
<p>For example, if the B2 remote name is called <code>b2-remote1</code> then the command to list the root is:</p>
<pre tabindex="0"><code>rclone lsd b2-remote1:
</code></pre><p>Note the <code>:</code> at the end.</p>
<p>If a folder contains spaces, you use double quotes like this rather than backticks <code>\</code>.</p>
<pre tabindex="0"><code>rclone lsd b2-remote1:Videos/&#34;Subfolder With Spaces/&#34;
</code></pre><p>Also use trailing forward slashes <code>/</code> instead of asterisks <code>*</code> to indicate the files inside.</p>
<h3 id="consider-copy-instead-of-sync">Consider <code>copy</code> instead of <code>sync</code>
</h3><p>From the docs<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>:</p>
<blockquote>
<ul>
<li><code>rclone copy</code> - Copy files from source to dest, skipping already copied.</li>
<li><code>rclone sync</code> - Make source and dest identical, modifying destination only.</li>
</ul>
</blockquote>
<p>Depending on your intention, <code>copy</code> may be better.</p>
<h3 id="expect-errors-and-verify">Expect Errors and Verify
</h3><p>Although Rclone automatically retries upload errors (by default up to 10 times) there are few reasons why files never get uploaded. See the appendix for various scenarios.</p>
<p>Therfore, in a nutshell, always verify your transfer after (<a class="link" href="#the-check-command" >see below</a>).</p>
<h3 id="beware-quota-restrictions">Beware Quota Restrictions
</h3><p>Unexpected EOF (end of file) errors can occur when streaming from a remote because of Backblaze quota restrictions.</p>
<pre tabindex="0"><code>2018/08/09 16:53:44 DEBUG : CAM A/private/M4ROOT/CLIP/C0001.MP4: Cancelling large file upload due to error: unexpected EOF
2018/08/09 16:53:45 DEBUG : CAM A/private/M4ROOT/CLIP/C0001.MP4: Received error: unexpected EOF - low level retry 1/10
</code></pre><h3 id="double-check-the-source-supports-and-has-checksums">Double Check the Source Supports (and has) Checksums
</h3><p>Since Backblaze only supports SHA-1 checksums, the Rclone docs indicate the source must also support SHA-1 checksums.<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup></p>
<blockquote>
<p>For a large file to be uploaded with an SHA1 checksum, the source needs to support SHA1 checksums. The local disk supports SHA1 checksums so large file transfers from local disk will have an SHA1. See <a class="link" href="https://rclone.org/overview/#features"  target="_blank" rel="noopener"
    >the overview</a> for exactly which remotes support SHA1.</p>
</blockquote>
<p>So B2 to B2 syncs should always populate checksums, right? Wrong. It will only <em>if</em> the source B2 bucket had checksums.</p>
<p>As detailed in the <a class="link" href="/post/video/2020/missing-checksums-with-synology-b2-cloud-sync/" >previous post</a>, that means if the large files were copied with Rclone would they have checksums.</p>
<h3 id="rclone-browser-is-great-but-deprecated-for-local---remote">Rclone Browser is Great (but Deprecated) for Local &lt;-&gt; Remote
</h3><p><a class="link" href="https://github.com/mmozeiko/RcloneBrowser"  target="_blank" rel="noopener"
    >Rclone Browser</a> is a wrapper that the same config as the CLI. Rclone Browser does not support direct remote to remote syncs, but it is good for normal use. Unfortunately the program deprecated in favor of the <a class="link" href="https://rclone.org/gui/"  target="_blank" rel="noopener"
    >WebGUI</a>, but the latter doesn&rsquo;t let you yet upload things. 🤷🏾‍♂️</p>
<p>On Mac, Rclone Browser can be installed with Homebrew via <code>brew cask install rclone-browser</code></p>
<h3 id="-reliability-by--chunk-size-using--ram">⬆︎ Reliability by ⬆︎ Chunk Size (using ⬆︎ RAM)
</h3><p>The default settings seem to be optimized for small files, like webpages.</p>
<ul>
<li>Single part upload cutoff of 200 MB</li>
<li>Chunk size of 96 MB</li>
<li>Four concurrent transfers</li>
</ul>
<p>For whatever reason, the error rate with these defaults was higher than I expected (<a class="link" href="#performance-logs" >see below</a>).</p>
<p>Instead, I found better stability for large video files with:</p>
<ul>
<li>Cutoff of 1G</li>
<li>1G &lt;= chunk size &lt;=4G</li>
<li>Two concurrent transfers</li>
</ul>
<p>Note that all concurrent chunks are buffered into memory, so there is significantly more RAM usage with larger chunk sizes. Hence the downgrade to two transfers.</p>
<p>More specifics in the sync section <a class="link" href="#the-sync-command" >below</a>.</p>
<h3 id="measure-twice-cut-once-dryrun">Measure Twice, Cut Once: <code>dryrun</code>
</h3><p>Before discussing the <code>sync</code> command, it&rsquo;s imperative mention the <code>--dryrun</code> flag for the following reasons.</p>
<ul>
<li>Backblaze bills by usage/throughput</li>
<li>B2 doesn&rsquo;t support renaming files after they are uploaded</li>
</ul>
<p>Therefore, when running <code>rclone sync</code> always use the <code>--dryrun</code> option first.</p>
<h2 id="the-sync-command">The <code>sync</code> command
</h2><p>My goto <code>sync</code> (or<code>copy</code>) command is:</p>
<p><code>rclone sync &lt;source&gt; &lt;dest&gt; --exclude .DS_Store -vv --b2-upload-cutoff 1G --b2-chunk-size 1G --transfers 2</code></p>
<h3 id="explanation-of-flags">Explanation of Flags
</h3><ul>
<li><code>--exclude .DS_Store</code> to excluding Mac specific files</li>
<li><code>-vv</code> to enable DEBUG logging for visibility into chunk retries, etc.</li>
<li><code>--b2-upload-cutoff</code> files above this size will switch to a multipart chunked transfer</li>
<li><code>--b2-chunk-size</code> the size of the chunks, buffered in memory</li>
<li><code>--transfers</code> number of simulatenous transfers. <code>b2-chunk-size</code> x <code>transfers</code> must fit in RAM</li>
</ul>
<h3 id="phased-approach-with---max-size">Phased Approach with <code>--max-size</code>
</h3><p>Sometimes I found it helpful to transfer all files under a certain size limit first, say 1 GB, and then re-run the command for larger files.</p>
<p>To do so, add <code>--max-size 1G</code> to the <code>rclone sync</code> command.</p>
<h2 id="the-check-command">The <code>check</code> command
</h2><p>Always verify after a sync. Even if you think you don&rsquo;t need to. The command is straightforward:</p>
<p><code>rclone check &lt;source&gt; &lt;dest&gt; --exclude .DS_Store</code></p>
<p>If there are discrepancies the output will look like:</p>
<pre tabindex="0"><code>2018/09/05 07:45:04 ERROR : CAM 2/AVF_INFO/AVIN0001.BNP: File not in Local file system at /Volumes/Scratch/ToB2
2018/09/05 07:45:04 ERROR : CAM 2/AVF_INFO/AVIN0001.INP: File not in Local file system at /Volumes/Scratch/ToB2
2018/09/05 07:45:04 ERROR : CAM 2/AVF_INFO/AVIN0001.INT: File not in Local file system at /Volumes/Scratch/ToB2
2018/09/05 07:45:04 ERROR : CAM 2/AVF_INFO/PRV00001.BIN: File not in Local file system at /Volumes/Scratch/ToB2
</code></pre><h3 id="use-error-output-to-create-diff-file">Use error output to create diff file
</h3><p>By massaging the <code>rclone check</code> standard output into a new file with just the file names, it is possible to re-sync just these files. This saves us Backblaze read transactions on the files already copied.</p>
<p>Assuming a file <code>mydiff.txt</code>:</p>
<pre tabindex="0"><code>CAM 2/AVF_INFO/AVIN0001.BNP
CAM 2/AVF_INFO/AVIN0001.INP
CAM 2/AVF_INFO/AVIN0001.INT
CAM 2/AVF_INFO/PRV00001.BIN
</code></pre><p>the sync command is:</p>
<pre tabindex="0"><code>rclone sync &lt;source&gt; &lt;dest&gt; --files-from mydiff.txt &lt;other flags&gt;
</code></pre><p>Then, run <code>rclone check</code> again on all the files.</p>
<h2 id="the-cleanup-command">The <code>cleanup</code> command
</h2><p>If your buckets are created with default settings, the file lifecyle is set to <code>Keep all versions</code>.</p>
<p>To purge deleted files, use a similar syntax to the <code>lsd</code> command.</p>
<pre tabindex="0"><code>rclone lsd b2-remote1:Videos/&#34;Subfolder With Spaces/&#34;
</code></pre><p>Also note that<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup>:</p>
<blockquote>
<p>Note that <code>cleanup</code> will remove partially uploaded files from the bucket if they are more than a day old.</p>
</blockquote>
<h2 id="appendix">Appendix
</h2><h3 id="performance-logs">Performance Logs
</h3><p>The exact command I used at first was</p>
<pre tabindex="0"><code>rclone sync b2-krish:Footage/&#34;SD Card Archives/&#34; b2-org:RawFiles/&#34;Offloaded Video&#34; -vv --exclude .DS_Store
</code></pre><p>and it completed, roughly 3 days later with a 5% error rate.</p>
<pre tabindex="0"><code>2018/08/12 19:46:55 INFO  : 
Transferred:   1.674 TBytes (6.491 MBytes/s)
Errors:                63
Checks:              2173
Transferred:         1123
Elapsed time:   75h6m1.4s
Transferring:
 *   CAM 1/PRIVATE/XDROOT/Clip/Clip0026.MXF: 99% /53.023G, 4.727M/s, 42s
...
2018/08/12 19:47:23 ERROR : Attempt 3/3 failed with 63 errors and: unexpected EOF
2018/08/12 19:47:23 Failed to sync: unexpected EOF
$
</code></pre><p>Instead, by using a chunk size 1G and two max transfers (total 2G in RAM at a time) transfers were noticeably more stable.</p>
<pre tabindex="0"><code>2018/09/01 22:40:13 INFO  : 
Transferred:   52.430 GBytes (5.752 MBytes/s)
Errors:                 0
Checks:               232
Transferred:          776
Elapsed time:  2h35m33.8s

2018/09/01 22:40:13 DEBUG : 14 go routines active
2018/09/01 22:40:13 DEBUG : rclone: Version &#34;v1.42&#34; finishing with parameters [&#34;rclone&#34; &#34;copy&#34; &#34;b2-org:RawFiles/Offloaded Video/&#34; &#34;b2-org:RawFiles/SD Cards/&#34; &#34;--exclude&#34; &#34;.DS_Store&#34; &#34;-vv&#34; &#34;--transfers&#34; &#34;2&#34; &#34;--b2-chunk-size&#34; &#34;1G&#34; &#34;--b2-upload-cutoff&#34; &#34;1G&#34; &#34;--max-size&#34; &#34;1G&#34;]
$
</code></pre><h3 id="upload-cutoffs-of-5g">Upload cutoffs of &ldquo;5G&rdquo;
</h3><p>During my experiments, I once tried a 5G single-part cutoff: <code>--b2-chunk-size 2G --b2-upload-cutoff 5G --max-size 5G</code>. The docs state <code>This value should be set no larger than 4.657GiB (== 5GB)</code> however it threw this error.</p>
<pre tabindex="0"><code>2018/09/03 13:56:01 Failed to copy: File size too big: 5022908174 (400 bad_request)
</code></pre><p>So apparently <code>5G</code> is too high. <code>4G</code> worked fine though.</p>
<h3 id="500-internal-server-error">500 Internal Server Error
</h3><p>Something is wrong with Backblaze, usually a transient problem. Rclone will retry, by default up to 10 times with built-in rate limiting (pacer) as shown with the incident <code>a7691a3d7f71-e47fc872d7ba</code> below.</p>
<pre tabindex="0"><code>2018/08/09 16:53:12 DEBUG : CAM A/private/M4ROOT/CLIP/C0002.MP4: Error sending chunk 2 (retry=true): incident id a7691a3d7f71-e47fc872d7ba (500 internal_error): &amp;api.Error{Status:500, Code:&#34;internal_error&#34;, Message:&#34;incident id a7691a3d7f71-e47fc872d7ba&#34;}
2018/08/09 16:53:12 DEBUG : CAM A/private/M4ROOT/CLIP/C0002.MP4: Clearing part upload URL because of error: incident id a7691a3d7f71-e47fc872d7ba (500 internal_error)
2018/08/09 16:53:12 DEBUG : pacer: Rate limited, increasing sleep to 20ms
2018/08/09 16:53:12 DEBUG : pacer: low level retry 1/10 (error incident id a7691a3d7f71-e47fc872d7ba (500 internal_error))
2018/08/09 16:53:12 DEBUG : CAM A/private/M4ROOT/CLIP/C0002.MP4: Sending chunk 2 length 100663296
</code></pre><h2 id="references">References
</h2><div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a class="link" href="https://rclone.org/docs/#subcommands"  target="_blank" rel="noopener"
    >https://rclone.org/docs/#subcommands</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p><a class="link" href="https://rclone.org/b2/#sha1-checksums"  target="_blank" rel="noopener"
    >https://rclone.org/b2/#sha1-checksums</a>&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3">
<p><a class="link" href="https://rclone.org/b2/#versions"  target="_blank" rel="noopener"
    >https://rclone.org/b2/#versions</a>&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/cloud/">Cloud</a>
        
    </section>


    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/post/video/2020/missing-checksums-with-synology-b2-cloud-sync/">
        
        

        <div class="article-details">
            <h2 class="article-title">Missing Checksums in NAS Cloud Archives</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/post/video/2018/cloud-storage-and-finder-folder-icons/">
        
        

        <div class="article-details">
            <h2 class="article-title">Persisting Finder Labels in Cloud Storage</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/post/video/2017/best-practices-for-large-web-transfers/">
        
        

        <div class="article-details">
            <h2 class="article-title">Best Practices for Large Web Transfers</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2016 - 
        
        2024 Krishna Bhamidipati
    </section>
    
    <section class="powerby">
        
            Krishna Bhamidipati <br/>
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.27.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
